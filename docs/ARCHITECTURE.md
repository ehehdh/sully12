# ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> Politi-Logì˜ ì‹œìŠ¤í…œ ì„¤ê³„ ë° ì•„í‚¤í…ì²˜ ë¬¸ì„œ

## ğŸ“Š í˜„ì¬ ìƒíƒœ ìš”ì•½

| í•­ëª© | í˜„ì¬ | ëª©í‘œ |
|------|------|------|
| **ì•„í‚¤í…ì²˜** | ë‹¨ì¼ Next.js ì•± | ëª¨ë“ˆí™”ëœ ê¸°ëŠ¥ êµ¬ì¡° |
| **ìƒíƒœ ê´€ë¦¬** | Zustand + Supabase | Redis + Supabase |
| **AI í”„ë¡¬í”„íŠ¸** | ì™¸ë¶€ ì„¤ì • íŒŒì¼ âœ… | ê´€ë¦¬ì UI |
| **ì¸ì¦** | ì„¸ì…˜ ID | ì†Œì…œ ë¡œê·¸ì¸ |
| **ê´€ë¦¬ì** | ê¸°ë³¸ í˜ì´ì§€ | ì™„ì „í•œ ëŒ€ì‹œë³´ë“œ |

---

## ğŸ¯ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Client (Next.js)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Pages   â”‚  â”‚Componentsâ”‚  â”‚  Hooks   â”‚  â”‚  Store  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     API Routes                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  /rooms  â”‚  â”‚/messages â”‚  â”‚/realtime â”‚  â”‚ /topics â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    External Services                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Supabase       â”‚           Groq API                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL    â”‚  â”‚  â”‚  Llama 3.1 8b              â”‚  â”‚
â”‚  â”‚  - rooms       â”‚  â”‚  â”‚  - Fallacy Check           â”‚  â”‚
â”‚  â”‚  - participantsâ”‚  â”‚  â”‚  - Fact Check              â”‚  â”‚
â”‚  â”‚  - messages    â”‚  â”‚  â”‚  - Toxicity Check          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  - Verdict Generation      â”‚  â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ì½”ë“œ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx                  # í™ˆí˜ì´ì§€
â”‚   â”œâ”€â”€ admin/                    # ê´€ë¦¬ì í˜ì´ì§€
â”‚   â”œâ”€â”€ debate/[id]/              # í† ë¡ ë°© í˜ì´ì§€
â”‚   â”œâ”€â”€ lobby/                    # ë¡œë¹„
â”‚   â””â”€â”€ api/                      # API ë¼ìš°íŠ¸
â”‚       â”œâ”€â”€ rooms/                # ë°© ê´€ë ¨ API
â”‚       â”œâ”€â”€ messages/             # ë©”ì‹œì§€ API
â”‚       â”œâ”€â”€ realtime/             # ì‹¤ì‹œê°„ API
â”‚       â””â”€â”€ topics/               # ì£¼ì œ API
â”‚
â”œâ”€â”€ components/                   # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/                       # ê¸°ë³¸ UI (ë²„íŠ¼, ì¹´ë“œ ë“±)
â”‚   â””â”€â”€ debate/                   # í† ë¡  ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚
â”œâ”€â”€ config/                       # ì„¤ì • íŒŒì¼
â”‚   â””â”€â”€ prompts/                  # AI í”„ë¡¬í”„íŠ¸
â”‚       â””â”€â”€ index.ts              # ì¤‘ì•™ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬
â”‚
â”œâ”€â”€ features/                     # ê¸°ëŠ¥ ëª¨ë“ˆ (ë¸”ë¡)
â”‚   â”œâ”€â”€ index.ts                  # ëª¨ë“ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬
â”‚   â”œâ”€â”€ auth/                     # ì¸ì¦ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ admin/                    # ê´€ë¦¬ì ëª¨ë“ˆ
â”‚   â”œâ”€â”€ debate/                   # í† ë¡  í•µì‹¬ ëª¨ë“ˆ
â”‚   â””â”€â”€ ai-moderator/             # AI ì¤‘ì¬ì ëª¨ë“ˆ
â”‚
â””â”€â”€ lib/                          # ìœ í‹¸ë¦¬í‹°
    â”œâ”€â”€ supabase.ts               # Supabase í´ë¼ì´ì–¸íŠ¸
    â”œâ”€â”€ db.ts                     # DB í•¨ìˆ˜
    â””â”€â”€ debateStages.ts           # í† ë¡  ë‹¨ê³„ ì„¤ì •
```

---

## ğŸ§© ê¸°ëŠ¥ ëª¨ë“ˆ ì‹œìŠ¤í…œ

ê° ê¸°ëŠ¥ì€ ë…ë¦½ì ì¸ "ë¸”ë¡"ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

```
features/[feature-name]/
â”œâ”€â”€ index.ts           # ê³µê°œ API
â”œâ”€â”€ types.ts           # íƒ€ì… ì •ì˜
â”œâ”€â”€ constants.ts       # ìƒìˆ˜
â”œâ”€â”€ services/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”œâ”€â”€ hooks/             # React Hooks
â””â”€â”€ components/        # UI ì»´í¬ë„ŒíŠ¸
```

### í˜„ì¬ ëª¨ë“ˆ ìƒíƒœ

| ëª¨ë“ˆ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| `debate` | ğŸŸ¢ êµ¬í˜„ë¨ | í† ë¡  í•µì‹¬ ë¡œì§ |
| `ai-moderator` | ğŸŸ¢ êµ¬í˜„ë¨ | AI ë¶„ì„ ê¸°ëŠ¥ |
| `auth` | ğŸŸ¡ êµ¬ì¡°ë§Œ | ì¸ì¦ (ë¯¸êµ¬í˜„) |
| `admin` | ğŸŸ¡ êµ¬ì¡°ë§Œ | ê´€ë¦¬ì (ë¯¸êµ¬í˜„) |

---

## ğŸ”„ ë°ì´í„° íë¦„

### í† ë¡  ì§„í–‰ íë¦„

```
1. ì‚¬ìš©ìê°€ ë©”ì‹œì§€ ì…ë ¥
      â”‚
      â–¼
2. API Route (/api/messages)
      â”‚
      â”œâ”€â”€â–º Supabaseì— ë©”ì‹œì§€ ì €ì¥
      â”‚
      â””â”€â”€â–º AI ë¶„ì„ ìš”ì²­ (ë³‘ë ¬)
               â”‚
               â”œâ”€â”€ fallacyCheck()
               â”œâ”€â”€ factCheck()
               â””â”€â”€ toxicityCheck()
               â”‚
               â–¼
3. ë¶„ì„ ê²°ê³¼ ë°˜í™˜
      â”‚
      â–¼
4. ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (Supabase Realtime)
      â”‚
      â–¼
5. í´ë¼ì´ì–¸íŠ¸ UI ë°˜ì˜
```

### ë‹¨ê³„ ì „í™˜ íë¦„

```
1. íƒ€ì´ë¨¸ ì¢…ë£Œ ë˜ëŠ” ìˆ˜ë™ ì „í™˜
      â”‚
      â–¼
2. advanceStage() í˜¸ì¶œ
      â”‚
      â”œâ”€â”€â–º ë°© ìƒíƒœ ì—…ë°ì´íŠ¸
      â””â”€â”€â–º ì „í™˜ ë©”ì‹œì§€ ìƒì„±
      â”‚
      â–¼
3. ì‹¤ì‹œê°„ ë¸Œë¡œë“œìºìŠ¤íŠ¸
      â”‚
      â–¼
4. ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ë™ê¸°í™”
```

---

## ğŸ“‹ ë‹¨ê³„ë³„ ê°œì„  ë¡œë“œë§µ

### Phase 1: ì¦‰ì‹œ ê°œì„  âœ… (ì™„ë£Œ)

- [x] AI í”„ë¡¬í”„íŠ¸ ì™¸ë¶€í™”
- [x] ê¸°ëŠ¥ë³„ ëª¨ë“ˆ êµ¬ì¡° ìƒì„±
- [x] íƒ€ì… ë° ìƒìˆ˜ ì •ì˜

### Phase 2: ê¸°ì¡´ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ ğŸš§

- [ ] `lib/ai.ts` â†’ `features/ai-moderator/`
- [ ] `lib/store.ts` â†’ `features/debate/`
- [ ] API ë¼ìš°íŠ¸ ë„ë©”ì¸ë³„ ë¶„ë¦¬

### Phase 3: ì¸ì¦ ì‹œìŠ¤í…œ ğŸ“‹

- [ ] Supabase Auth ì„¤ì •
- [ ] ì†Œì…œ ë¡œê·¸ì¸ (Google, Kakao)
- [ ] ë³´í˜¸ëœ ë¼ìš°íŠ¸ ë¯¸ë“¤ì›¨ì–´

### Phase 4: ê´€ë¦¬ì ê¸°ëŠ¥ ğŸ“‹

- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ UI
- [ ] í† ë¡  ì£¼ì œ ê´€ë¦¬
- [ ] AI í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ UI

### Phase 5: ì˜ì†ì„± ê°œì„  ğŸ“‹

- [ ] Redis ìºì‹± ë ˆì´ì–´
- [ ] ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ ìµœì í™”

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### êµ¬í˜„ë¨

- âœ… í”„ë¡¬í”„íŠ¸ ì¸ì ì…˜ ë°©ì§€ (XML íƒœê·¸ ë˜í•‘)
- âœ… ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ ì œí•œ (DoS ë°©ì§€)
- âœ… API í‚¤ ì„œë²„ ì‚¬ì´ë“œ ë³´ê´€

### ê³„íšë¨

- ğŸ“‹ Socket.io ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
- ğŸ“‹ Rate limiting
- ğŸ“‹ ì…ë ¥ê°’ ê²€ì¦ ê°•í™”

---

## ğŸ›  ê¸°ìˆ  ì„ íƒ ì´ìœ 

| ê¸°ìˆ  | ì„ íƒ ì´ìœ  |
|------|----------|
| **Next.js 14** | SSR, App Router, API Routes í†µí•© |
| **Supabase** | PostgreSQL + ì‹¤ì‹œê°„ + ì¸ì¦ ì˜¬ì¸ì› |
| **Groq API** | ë¹ ë¥¸ LLM ì¶”ë¡ , Llama 3.1 ì§€ì› |
| **Zustand** | ê°„ë‹¨í•œ ìƒíƒœ ê´€ë¦¬, React ì¹œí™”ì  |
| **Tailwind CSS** | ë¹ ë¥¸ ìŠ¤íƒ€ì¼ë§, ì¼ê´€ëœ ë””ìì¸ ì‹œìŠ¤í…œ |
